<app-navbar></app-navbar>

<div class="dashboard-container">
  <div class="container">
    <div class="dashboard-header">
      <h1>Bem-vindo, {{ usuario?.nome }}!</h1>
      <p>Gerencie seus agendamentos e perfil</p>
    </div>

    <div class="gold-divider"></div>

    <div class="dashboard-stats">
      <div class="stat-card card">
        <h3>{{ agendamentosProximos.length }}</h3>
        <p>Agendamentos Pr√≥ximos</p>
      </div>
      <div class="stat-card card">
        <h3>{{ getAgendamentosConcluidos() }}</h3>
        <p>Servi√ßos Conclu√≠dos</p>
      </div>
      <div class="stat-card card">
        <h3>{{ agendamentos.length }}</h3>
        <p>Total de Agendamentos</p>
      </div>
    </div>

    <div class="dashboard-actions">
      <button class="btn btn-primary" (click)="novoAgendamento()">
        ‚ûï Novo Agendamento
      </button>
      <button class="btn btn-secondary" (click)="verTodos()">
        üìã Ver Todos os Agendamentos
      </button>
    </div>

    @if (carregando) {
      <div class="loading text-center">
        <p>Carregando...</p>
      </div>
    } @else {
      @if (agendamentosProximos.length > 0) {
        <section class="proximos-agendamentos">
          <h2>Pr√≥ximos Agendamentos</h2>
          <div class="gold-divider"></div>
          
          <div class="grid grid-2 mt-2">
            @for (agendamento of agendamentosProximos; track agendamento.id) {
              <div class="card agendamento-card">
                <div class="agendamento-header">
                  <h3>{{ agendamento.servico_nome }}</h3>
                  <span class="status-badge" [ngClass]="getStatusClass(agendamento.status || '')">
                    {{ getStatusLabel(agendamento.status || '') }}
                  </span>
                </div>
                <div class="agendamento-info">
                  <p><strong>Barbeiro:</strong> {{ agendamento.barbeiro_nome }}</p>
                  <p><strong>Data/Hora:</strong> {{ formatarData(agendamento.data_hora) }}</p>
                  <p><strong>Dura√ß√£o:</strong> {{ agendamento.servico_duracao }} minutos</p>
                  <p class="preco"><strong>Valor:</strong> R$ {{ agendamento.servico_preco?.toFixed(2) }}</p>
                  @if (agendamento.observacoes) {
                    <p class="observacoes"><strong>Obs:</strong> {{ agendamento.observacoes }}</p>
                  }
                </div>
              </div>
            }
          </div>
        </section>
      } @else {
        <div class="empty-state card text-center">
          <h2>Nenhum agendamento pr√≥ximo</h2>
          <p>Que tal agendar um hor√°rio agora?</p>
          <button class="btn btn-primary mt-2" (click)="novoAgendamento()">
            Agendar Agora
          </button>
        </div>
      }
    }
  </div>
</div>

